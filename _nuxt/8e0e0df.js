(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{440:function(t,e,n){"use strict";n.r(e);n(31);var r=n(11),o={data:function(){return{logged:!1,loading:!1}},props:["channel"],methods:{subscribe:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,t.$axios.$post("".concat(t.$config.CHANNELS_BASE_URL,"/channel/").concat(t.channel.id,"/subscribe"));case 4:t.$emit("subscribed",t.channel),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:t.loading=!1;case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))()},unsubscribe:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,t.$axios.$post("".concat(t.$config.CHANNELS_BASE_URL,"/channel/").concat(t.channel.id,"/unsubscribe"));case 4:t.$emit("unsubscribed",t.channel),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:t.loading=!1;case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))()}},mounted:function(){this.logged=sessionStorage.getItem("logged")}},c=n(24),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return"true"==t.logged&&null!=t.channel.subscribed?n("div",[!1===t.channel.subscribed?n("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:t.subscribe}},[!0===t.loading?n("b-spinner",{attrs:{type:"grow",label:"Loading...",small:""}}):n("span",[t._v(t._s(t.$t("subscribe")))])],1):n("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button"},on:{click:t.unsubscribe}},[!0===t.loading?n("b-spinner",{attrs:{type:"grow",label:"Loading...",small:""}}):n("span",[t._v(t._s(t.$t("subscribed")))])],1)]):t._e()}),[],!1,null,null,null);e.default=component.exports},441:function(t,e,n){var map={"./af":305,"./af.js":305,"./ar":306,"./ar-dz":307,"./ar-dz.js":307,"./ar-kw":308,"./ar-kw.js":308,"./ar-ly":309,"./ar-ly.js":309,"./ar-ma":310,"./ar-ma.js":310,"./ar-sa":311,"./ar-sa.js":311,"./ar-tn":312,"./ar-tn.js":312,"./ar.js":306,"./az":313,"./az.js":313,"./be":314,"./be.js":314,"./bg":315,"./bg.js":315,"./bm":316,"./bm.js":316,"./bn":317,"./bn.js":317,"./bo":318,"./bo.js":318,"./br":319,"./br.js":319,"./bs":320,"./bs.js":320,"./ca":321,"./ca.js":321,"./cs":322,"./cs.js":322,"./cv":323,"./cv.js":323,"./cy":324,"./cy.js":324,"./da":325,"./da.js":325,"./de":326,"./de-at":327,"./de-at.js":327,"./de-ch":328,"./de-ch.js":328,"./de.js":326,"./dv":329,"./dv.js":329,"./el":330,"./el.js":330,"./en-au":331,"./en-au.js":331,"./en-ca":332,"./en-ca.js":332,"./en-gb":333,"./en-gb.js":333,"./en-ie":334,"./en-ie.js":334,"./en-il":335,"./en-il.js":335,"./en-in":336,"./en-in.js":336,"./en-nz":337,"./en-nz.js":337,"./en-sg":338,"./en-sg.js":338,"./eo":339,"./eo.js":339,"./es":340,"./es-do":341,"./es-do.js":341,"./es-us":342,"./es-us.js":342,"./es.js":340,"./et":343,"./et.js":343,"./eu":344,"./eu.js":344,"./fa":345,"./fa.js":345,"./fi":346,"./fi.js":346,"./fil":347,"./fil.js":347,"./fo":348,"./fo.js":348,"./fr":349,"./fr-ca":350,"./fr-ca.js":350,"./fr-ch":351,"./fr-ch.js":351,"./fr.js":349,"./fy":352,"./fy.js":352,"./ga":353,"./ga.js":353,"./gd":354,"./gd.js":354,"./gl":355,"./gl.js":355,"./gom-deva":356,"./gom-deva.js":356,"./gom-latn":357,"./gom-latn.js":357,"./gu":358,"./gu.js":358,"./he":359,"./he.js":359,"./hi":360,"./hi.js":360,"./hr":361,"./hr.js":361,"./hu":362,"./hu.js":362,"./hy-am":363,"./hy-am.js":363,"./id":364,"./id.js":364,"./is":365,"./is.js":365,"./it":366,"./it-ch":367,"./it-ch.js":367,"./it.js":366,"./ja":368,"./ja.js":368,"./jv":369,"./jv.js":369,"./ka":370,"./ka.js":370,"./kk":371,"./kk.js":371,"./km":372,"./km.js":372,"./kn":373,"./kn.js":373,"./ko":374,"./ko.js":374,"./ku":375,"./ku.js":375,"./ky":376,"./ky.js":376,"./lb":377,"./lb.js":377,"./lo":378,"./lo.js":378,"./lt":379,"./lt.js":379,"./lv":380,"./lv.js":380,"./me":381,"./me.js":381,"./mi":382,"./mi.js":382,"./mk":383,"./mk.js":383,"./ml":384,"./ml.js":384,"./mn":385,"./mn.js":385,"./mr":386,"./mr.js":386,"./ms":387,"./ms-my":388,"./ms-my.js":388,"./ms.js":387,"./mt":389,"./mt.js":389,"./my":390,"./my.js":390,"./nb":391,"./nb.js":391,"./ne":392,"./ne.js":392,"./nl":393,"./nl-be":394,"./nl-be.js":394,"./nl.js":393,"./nn":395,"./nn.js":395,"./oc-lnc":396,"./oc-lnc.js":396,"./pa-in":397,"./pa-in.js":397,"./pl":398,"./pl.js":398,"./pt":399,"./pt-br":400,"./pt-br.js":400,"./pt.js":399,"./ro":401,"./ro.js":401,"./ru":402,"./ru.js":402,"./sd":403,"./sd.js":403,"./se":404,"./se.js":404,"./si":405,"./si.js":405,"./sk":406,"./sk.js":406,"./sl":407,"./sl.js":407,"./sq":408,"./sq.js":408,"./sr":409,"./sr-cyrl":410,"./sr-cyrl.js":410,"./sr.js":409,"./ss":411,"./ss.js":411,"./sv":412,"./sv.js":412,"./sw":413,"./sw.js":413,"./ta":414,"./ta.js":414,"./te":415,"./te.js":415,"./tet":416,"./tet.js":416,"./tg":417,"./tg.js":417,"./th":418,"./th.js":418,"./tk":419,"./tk.js":419,"./tl-ph":420,"./tl-ph.js":420,"./tlh":421,"./tlh.js":421,"./tr":422,"./tr.js":422,"./tzl":423,"./tzl.js":423,"./tzm":424,"./tzm-latn":425,"./tzm-latn.js":425,"./tzm.js":424,"./ug-cn":426,"./ug-cn.js":426,"./uk":427,"./uk.js":427,"./ur":428,"./ur.js":428,"./uz":429,"./uz-latn":430,"./uz-latn.js":430,"./uz.js":429,"./vi":431,"./vi.js":431,"./x-pseudo":432,"./x-pseudo.js":432,"./yo":433,"./yo.js":433,"./zh-cn":434,"./zh-cn.js":434,"./zh-hk":435,"./zh-hk.js":435,"./zh-mo":436,"./zh-mo.js":436,"./zh-tw":437,"./zh-tw.js":437};function r(t){var e=o(t);return n(e)}function o(t){if(!n.o(map,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return map[t]}r.keys=function(){return Object.keys(map)},r.resolve=o,t.exports=r,r.id=441},450:function(t,e,n){var content=n(503);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(42).default)("3b0d3350",content,!0,{sourceMap:!1})},475:function(t,e){},502:function(t,e,n){"use strict";var r=n(450);n.n(r).a},503:function(t,e,n){(e=n(41)(!1)).push([t.i,".mytext[data-v-028b7de3]{border:0;padding:10px;background:#f5f5f5}.text[data-v-028b7de3]{width:75%;display:flex;flex-direction:column}.text>p[data-v-028b7de3]:first-of-type{width:100%;margin-top:0;margin-bottom:auto;line-height:13px;font-size:12px}.text>p[data-v-028b7de3]:last-of-type{width:100%;text-align:right;color:silver;margin-bottom:-7px;margin-top:auto}.text-l[data-v-028b7de3]{float:left;padding-right:10px}.text-r[data-v-028b7de3]{float:right;padding-left:10px}.avatar[data-v-028b7de3]{display:flex;justify-content:center;align-items:center;width:25%;float:left;padding-right:10px}.macro[data-v-028b7de3]{margin-top:5px;width:85%;border-radius:5px;padding:5px;display:flex}.msj-rta[data-v-028b7de3]{float:right;background:#f5f5f5}.msj[data-v-028b7de3]{float:left;background:#fff}.frame[data-v-028b7de3]{background:#e0e0de;height:450px;overflow:hidden;padding:0}.frame>div[data-v-028b7de3]:last-of-type{bottom:5px}.frame>div[data-v-028b7de3]:last-of-type,ul[data-v-028b7de3]{position:absolute;width:100%;display:flex}ul[data-v-028b7de3]{list-style-type:none;padding:18px;bottom:32px;flex-direction:column}input[data-v-028b7de3]:focus{outline:none}[data-v-028b7de3]::-webkit-input-placeholder{color:#d4d4d4}[data-v-028b7de3]::-moz-placeholder{color:#d4d4d4}[data-v-028b7de3]:-ms-input-placeholder{color:#d4d4d4}[data-v-028b7de3]:-moz-placeholder{color:#d4d4d4}",""]),t.exports=e},514:function(t,e,n){"use strict";n.r(e);n(31);var r=n(11),o={data:function(){return{inputMsg:""}},props:["chat"],methods:{sendMessage:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$post("".concat(t.$config.LESSONS_BASE_URL,"/lesson/").concat(t.$route.params.id,"/chat/message"),{text:t.inputMsg});case 2:n=e.sent,t.chat.push({text:t.inputMsg,nickname:"",timestamp:new Date(n.timestamp).toLocaleString(),isMine:!0}),t.inputMsg="";case 5:case"end":return e.stop()}}),e)})))()}}},c=(n(502),n(24)),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-12"},[n("div",{staticClass:"frame"},[n("ul",{staticStyle:{width:"95%"}},t._l(t.chat,(function(e,r){return n("li",{key:r,staticStyle:{width:"100%"}},[n("div",{class:(1==e.isMine?"msj-rta":"msj")+" macro"},[n("div",{class:"text "+(1==e.isMine?"text-r":"text-l")},[n("p",[n("strong",[t._v(t._s(e.nickname))])]),t._v(" "),n("p",[t._v(t._s(e.text))]),t._v(" "),n("p",[n("small",[t._v(t._s(e.timestamp))])])])])])})),0),t._v(" "),n("div",{staticStyle:{width:"95%"}},[n("div",{staticClass:"msj-rta macro",staticStyle:{margin:"auto"}},[n("div",{staticClass:"text text-r",staticStyle:{background:"whitesmoke !important",width:"100%!important"}},[n("form",{on:{submit:function(e){return e.preventDefault(),t.sendMessage(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.inputMsg,expression:"inputMsg"}],staticClass:"mytext",staticStyle:{width:"100%!important"},attrs:{placeholder:"Scrivi un messaggio"},domProps:{value:t.inputMsg},on:{input:function(e){e.target.composing||(t.inputMsg=e.target.value)}}})])])])])])])])}),[],!1,null,"028b7de3",null);e.default=component.exports},530:function(t,e,n){"use strict";n.r(e);n(13),n(131),n(31);var r=n(11),o=(n(303),n(515)),c={head:function(){return{title:this.video.title+" - Plaive"}},transition:{name:"page",mode:"out-in"},data:function(){return{logged:!1,player:null,videoOptions:{autoplay:!1,controls:!0,techOrder:["AmazonIVS"],fluid:!0,responsive:!0,liveui:!0,controlBar:{progressControl:!1,seekBar:!1,captions:!1}},video:{title:"",description:"",category:"",date:"",start:"",end:"",playbackUrl:"",purchased:!1,free:!1,tags:[]},channel:{id:"",link:"",name:"",description:"",logo:"",banner:"",subscribed:!1,subscribers:0},chat:[{text:"",nickname:"",timestamp:"",isMine:!1}]}},methods:{getChat:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.chat=[],e.next=3,t.$axios.$get("".concat(t.$config.LESSONS_BASE_URL,"/lesson/").concat(t.$route.params.id,"/chat/messages"));case 3:e.sent.map((function(e){t.chat.push({text:e.text,nickname:"",timestamp:new Date(e.timestamp).toLocaleString(),isMine:e.isMine})}));case 5:case"end":return e.stop()}}),e)})))()},getLesson:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("".concat(t.$config.LESSONS_BASE_URL,"/lesson/").concat(t.$route.params.id));case 2:return n=e.sent,console.log(n),t.video.title=n.title,t.video.description=n.description,t.video.category=n.category,t.video.date=n.date,t.video.start=n.start,t.video.end=n.end,t.video.playbackUrl=n.playbackUrl,t.video.free=0==n.price,t.video.tags=n.tags,e.next=15,t.getChannel(n.channelId);case 15:r=t.video.playbackUrl,registerIVSTech(o.a),t.player=Object(o.a)(t.$refs.videoPlayer,t.videoOptions,(function(){this.src(r)}));case 18:case"end":return e.stop()}}),e)})))()},getChannel:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.channel.logo="//via.placeholder.com/500x500",e.channel.banner="//via.placeholder.com/1500x386",n.next=4,e.$axios.$get("".concat(e.$config.CHANNELS_BASE_URL,"/channel/").concat(t));case 4:r=n.sent,e.channel.id=t,e.channel.link="/channel/".concat(t),e.channel.name=r.name,e.channel.description=r.description,e.channel.logo=""==r.logo?"//via.placeholder.com/500x500":r.logo,e.channel.banner=""==r.banner?"//via.placeholder.com/1500x386":r.banner,e.channel.subscribed=r.subscribed,e.channel.subscribers=r.subscribers;case 13:case"end":return n.stop()}}),n)})))()},subscribed:function(t){this.channel.subscribed=!0,this.channel.subscribers++},unsubscribed:function(t){this.channel.subscribed=!1,this.channel.subscribers--}},computed:{categories:function(){return this.channel.categories.join(", ")}},mounted:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.logged=sessionStorage.getItem("logged"),e.next=3,t.getLesson();case 3:return e.next=5,t.getChat();case 5:case"end":return e.stop()}}),e)})))()}},l=n(24),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"video-block section-padding"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-8"},[n("div",{staticClass:"single-video-left"},[n("div",{staticClass:"single-video"},[n("video",{ref:"videoPlayer",staticClass:"video-js vjs-16-9 vjs-big-play-centered",attrs:{controls:"",autoplay:"",playsinline:""}})]),t._v(" "),n("div",{staticClass:"single-video-title box mb-3"},[n("div",{staticClass:"d-none d-md-inline-block float-right"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-12"},["true"==t.logged&&!0!==t.video.free?n("div",[!1===t.video.purchased?n("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button"}},[t._v(t._s(t.$t("buy")))]):n("button",{staticClass:"btn btn-danger btn-sm",attrs:{disabled:"",type:"button"}},[t._v(t._s(t.$t("alreadyPurchased")))])]):t._e()])])]),t._v(" "),n("h2",[n("a",{attrs:{href:"#"}},[t._v(t._s(t.video.title))])]),t._v(" "),n("p",{staticClass:"mb-0"},[n("font-awesome-icon",{attrs:{icon:["fas","calendar-alt"]}}),t._v(" "+t._s(t.video.date)+" \n                "),n("font-awesome-icon",{attrs:{icon:["fas","clock"]}}),t._v(" "+t._s(t.video.start)+" - "+t._s(t.video.end)+"\n              ")],1),t._v(" "),"true"==t.logged&&!0!==t.video.free?n("div",{staticClass:"d-block d-md-none mt-3"},[!1===t.video.purchased?n("button",{staticClass:"btn btn-danger btn-block btn-sm",attrs:{type:"button"}},[t._v(t._s(t.$t("buy")))]):n("button",{staticClass:"btn btn-danger btn-block btn-sm",attrs:{disabled:"",type:"button"}},[t._v(t._s(t.$t("alreadyPurchased")))])]):t._e()]),t._v(" "),n("div",{staticClass:"single-video-author box mb-3"},[n("div",{staticClass:"d-none d-md-inline-block float-right"},[n("ChannelSubscribeButton",{attrs:{channel:t.channel},on:{subscribed:t.subscribed,unsubscribed:t.unsubscribed}})],1),t._v(" "),n("img",{staticClass:"img-fluid",attrs:{src:t.channel.logo,alt:""}}),t._v(" "),n("p",[n("nuxt-link",{attrs:{to:t.channel.link}},[n("strong",[t._v(t._s(t.channel.name))])])],1),t._v(" "),n("small",[t._v(t._s(t.channel.subscribers))]),t._v(" "),n("div",{staticClass:"d-block d-md-none mt-3"},[n("ChannelSubscribeButton",{attrs:{channel:t.channel},on:{subscribed:t.subscribed,unsubscribed:t.unsubscribed}})],1)]),t._v(" "),n("div",{staticClass:"single-video-info-content box mb-3"},[n("h6",[t._v(t._s(t.$t("category"))+":")]),t._v(" "),n("p",[t._v(t._s(t.video.category))]),t._v(" "),n("h6",[t._v(t._s(t.$t("description"))+":")]),t._v(" "),n("p",[t._v(t._s(t.video.description))]),t._v(" "),n("h6",[t._v(t._s(t.$t("tags"))+":")]),t._v(" "),n("p",{staticClass:"tags mb-0"},t._l(t.video.tags,(function(e,r){return n("span",{key:r,staticStyle:{margin:"0 3px"}},[n("nuxt-link",{attrs:{to:"tag.link"}},[t._v(t._s(e.tag))])],1)})),0)])])]),t._v(" "),n("div",{staticClass:"col-md-4"},[n("div",{staticClass:"single-video-right"},[n("Chat",{attrs:{chat:t.chat}})],1)])])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{ChannelSubscribeButton:n(440).default,Chat:n(514).default})}}]);